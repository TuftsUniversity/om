h1. Getting Fancy



h2. Manipulating Terms & Terminologies without Builders



If you want to manipulate Terms and Terminologies directly rather than using the Builder classes, you can consume their APIs at any time.

People don't often do this, but the option is there if you need it.

h3. Create a Terminology and some Terms Without Builders

To achieve this:

<pre>
  builder = OM::XML::Terminology::Builder.new do |t|
    t.root(:path=>"grants", :xmlns=>"http://yourmediashelf.com/schemas/hydra-dataset/v0", :schema=>"http://example.org/schemas/grants-v1.xsd")
    t.grant {
      t.organization(:attributes=>{:type=>"funder"}) {
        t.name(:index_as=>:searchable)
      }
      t.number
    }
  end
  another_terminology = builder.build
</pre>

You could also do this:

<pre>
# Create the Terminology, set its namespaces & (optional) schema 
# Note that you have to set the :oxns namespaces to match :xmlns

handcrafted_terminology = OM::XML::Terminology.new
handcrafted_terminology.namespaces[:xmlns] = "http://yourmediashelf.com/schemas/hydra-dataset/v0"
handcrafted_terminology.namespaces[:oxns] = "http://yourmediashelf.com/schemas/hydra-dataset/v0"
handcrafted_terminology.schema = "http://example.org/schemas/grants-v1.xsd"


# Create term1 (the root) and set it as the root term
term1 = OM::XML::Term.new("grants")
term1.is_root_term = true

# Create term2 (grant) and its subterms
term2 = OM::XML::Term.new("grant")
term2.path = "grant"  # this is automatically set based on the Term's name if you don't explicitly set it

subterm1 = OM::XML::Term.new("organization")
subterm1.attributes = {:type=>"funder"}

subterm2 = OM::XML::Term.new("number")

subsubterm = OM::XML::Term.new("name")
subsubterm.index_as = :searchable

# Assemble the tree of terms by adding child terms to their parents, then add those to the Terminology.
subterm1.add_child(subsubterm)
term2.add_child(subterm1)
term2.add_child(subterm2)
handcrafted_terminology.add_term(term1)
handcrafted_terminology.add_term(term2)
</pre>

Test it out:

<pre>
  handcrafted_terminology.retrieve_term(:organization, :name)
  handcrafted_terminology.xpath_for(:organization, :name)
  handcrafted_terminology.root_terms
</pre>